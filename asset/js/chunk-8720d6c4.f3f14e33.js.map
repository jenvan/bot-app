{"version":3,"sources":["webpack:///./src/views/Passport.vue?5d21","webpack:///./src/views/Passport.vue","webpack:///./src/views/Passport.vue?df33","webpack:///./src/assets/invite_intro.jpg","webpack:///./src/assets/invite_title.jpg"],"names":["class","title","invite","bg","height","onBack","back","name","size","src","onSubmit","onFailed","state","account","label","placeholder","rules","action","button","type","onSend","sms","password","code","block","native-type","to","components","BaseLayout","props","String","default","redirect","setup","created","this","mounted","me","$http","post","then","data","auth","$router","push","computed","act","arr","methods","values","test","err","$toast","console","error","render","__scopeId","module","exports"],"mappings":"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","file":"asset/js/chunk-8720d6c4.f3f14e33.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Passport.vue?vue&type=style&index=0&id=7fe3b0c2&scoped=true&lang=css\"","<template>\n  <BaseLayout :title=\"!invite ? title : '注册账号'\" bg=\"linear-gradient(180deg, #EFF, #F9F9F9 10%, #F9F9F9)\" :height=\"!invite? '60px': 0\" @click-back=\"onBack\">\n    <template #back><van-icon :name=\"invite?'wap-home-o':'arrow-left'\" size=\"large\"></van-icon></template>\n\n    <van-image :src=\"require('@/assets/invite_title.jpg')\" v-show=\"invite\"></van-image>\n    <van-steps class=\"step\" v-show=\"invite\">\n      <van-step>注册账号</van-step>\n      <van-step>下载 app</van-step>\n      <van-step>登录使用</van-step>\n    </van-steps>\n\n    <van-form class=\"form\" @submit=\"onSubmit\" @failed=\"onFailed\">\n      <van-field\n        v-show=\"action != 'login'\"\n        v-model=\"state.account\"\n        name=\"mobile\"\n        label=\"手机号\"\n        placeholder=\"请填写手机号\"\n        :rules=\"[{ required: action != 'login', message: '支持大陆及港澳台手机号码' }]\"\n      >\n        <template #button>\n          <van-button size=\"small\" type=\"primary\" @click=\"onSend\">发送验证码</van-button>\n        </template>\n      </van-field>\n      <van-field \n        v-show=\"action != 'login'\"\n        v-model=\"state.sms\" \n        name=\"vcode\"\n        label=\"验证码\" \n        :rules=\"[{ required: action != 'login', message: '请填写短信验证码' }]\"\n      />\n\n      <van-field\n        v-show=\"action == 'login'\"\n        v-model=\"state.account\"\n        name=\"username\"\n        label=\"账号\"\n        :placeholder=\"action == 'login' ? '手机号或用户名' : '请填写用户名'\"\n        :rules=\"[{ required: action == 'login', message: '用户名以字母开头且长度不小于5' }]\"\n      />\n      <van-field\n        v-model=\"state.password\"\n        type=\"password\"\n        name=\"password\"\n        label=\"密码\"\n        :placeholder=\"action == 'changepassword' ? '请填写新的密码' : '请填写密码'\"\n        :rules=\"[{ required: true, message: '包含字母和数字且长度不小于6' }]\"\n      />\n\n      <van-field\n        v-show=\"action == 'invite'\"\n        v-model=\"state.code\"\n        name=\"code\"\n        label=\"邀请码\"\n        placeholder=\"没有可以不用填写\"\n      />\n\n      <br/>\n      <van-button block type=\"primary\" native-type=\"submit\">{{title}}</van-button>\n\n      <div class=\"extra\" v-show=\"!invite && action=='login'\"   >没有账号？<router-link class=\"register\" to=\"/register\">注册</router-link><router-link class=\"right\"  to=\"/changepassword\">忘记密码？</router-link></div>\n      <div class=\"extra\" v-show=\"!invite && action=='register'\">已有账号？<router-link class=\"login\" to=\"/login\">登录</router-link></div>\n\n    </van-form>\n\n    <div class=\"intro\">\n      <van-image v-show=\"invite\" :src=\"require('@/assets/invite_intro.jpg')\" height=\"1000px\"></van-image>\n    </div>\n\n  </BaseLayout>\n</template>\n\n<style scoped>\n.step {\n  margin: 10px;\n}\n.form {\n  margin: 10px auto;\n  padding: 10px;\n  border-radius: 10px;\n  overflow: hidden;\n}\n.extra {\n  margin-top: 20px;\n  padding: 0 10px;\n  color: #999;\n  font-size: 14px;\n}\n.right {\n  float: right;\n}\n.intro {\n  margin-top: 20px;\n}\n</style>\n\n<script>\nimport {reactive} from 'vue'\nimport {mapState, mapGetters, mapMutations} from 'vuex'\nimport BaseLayout from '@/components/BaseLayout.vue'\n\nexport default {\n  components: {BaseLayout},\n\n  props: {\n    action: {\n      type: String,\n      default: \"login\",\n    },\n    code: {\n      type: String,\n      default: \"\",\n    },\n    redirect: {\n      type: String,\n      default: \"/my\",\n    }\n  },\n\n  setup(){\n    const state = reactive({\n      account: \"\",\n      password: \"Test123\",\n      code: \"\",\n      sms: \"\",\n    });\n\n    return {\n      state,\n    };\n  },\n\n  created(){\n    this.state.code = this.code;\n  },\n\n  mounted(){\n    if (this.action == \"logout\"){\n      let me = this;\n      this.$http.post(\"/user/\" + this.action).then((data) => {\n        me.auth(data);\n        me.$router.push(me.redirect);\n      });\n    }\n  },\n\n  computed: {\n    invite(){\n      return this.action == \"invite\" ? true : false;\n    },\n    title() {\n      let act = this.action;\n      let arr = {\n        \"login\" : \"登录\",\n        \"register\" : \"注册\",\n        \"changepassword\" : \"找回密码\",\n      }\n      if (this.invite)\n        return \"注册\";\n      if (typeof arr[act] == \"undefined\")\n        return \"登录\";\n      return arr[act];\n    },\n    ...mapState([\"profile\"]),\n    ...mapGetters([\"authorized\"]),\n  },\n\n  methods: {\n    onBack: function(){\n      if (this.invite)\n        return this.$router.push(\"/\");\n      return this.$router.push(\"/my\");\n    },\n    onSend: function(){\n      this.$http.post(\"/user/verify?mobile=\" + this.state.account);\n    },\n    onSubmit: function(values) {\n      let me = this;\n      let action = this.action != \"invite\" ? this.action : \"register\";\n      /^\\d+$/.test(this.state.account) && delete values[\"username\"] || delete values[\"mobile\"];\n      this.$http.post(\"/user/\" + action, values).then((data) => {\n        me.auth(data);\n        me.$router.push(me.redirect);\n      });\n    },\n    onFailed(err){\n      this.$toast(\"请按要求填写表单\");\n      console.error(\"表单提交失败\", err);\n    },\n    ...mapMutations([\"auth\"]),\n  }\n\n}\n\n</script>\n","import { render } from \"./Passport.vue?vue&type=template&id=7fe3b0c2&scoped=true\"\nimport script from \"./Passport.vue?vue&type=script&lang=js\"\nexport * from \"./Passport.vue?vue&type=script&lang=js\"\n\nimport \"./Passport.vue?vue&type=style&index=0&id=7fe3b0c2&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-7fe3b0c2\"\n\nexport default script","module.exports = __webpack_public_path__ + \"asset/img/invite_intro.3b623efd.jpg\";","module.exports = __webpack_public_path__ + \"asset/img/invite_title.984e4a7a.jpg\";"],"sourceRoot":""}